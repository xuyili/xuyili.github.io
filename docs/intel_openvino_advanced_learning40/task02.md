# Task02 OpenVINO异构系统编程、视频加速处理

## 1 第2课：异构系统编程

- 加速器的故事：1985年能购买到386处理器，通过软件进行运算，速度会比较慢，在当时也可以购买i387DX处理器，作为外部加速器，提供了主处理器的额外运算能力，可以看作是Intel早期分布式算力系统的缩影；大约4年后，i387DX处理器被集成至CPU中，但是仍有一部分加速单元是独立的，必须在CPU的协同下工作，
- 不同设备的对比：
  1. CPU：可以运行的应用最广泛，具有最灵活的模型编辑，支持多种编程语言，具有需要调试和分析工具，但在3D渲染方面，不如专门的GPU
  2. GPU：执行3D渲染任务的速度更快更高效，不如CPU可运行的应用广泛，支持GPU的调试和分析工具相对较少
  3.  VPU：特定领域的加速器，在功率更低的设备中执行更高效的任务
  4.  FPGA：混合性解决方案，具有可编程，可像专用硬件一样，进行硬件加速
- 硬件加速器：专用于加速特定任务，加速器通常由CPU控制，CPU向加速器发送数据和运行指令，等待返回结果；期间会产生拷贝开销，数据传输成本较高
- 异构系统编程：
  1. 了解设备能力，可以使用评估工具，对设备进行评测
  2. 利用所有的系统资源，并平衡系统中的计算资源
  3. 考虑数据传输成本
- 异构编程原理：使用IR文件（与设备无关），通过推理引擎在不同设备上进行模型推理，提供灵活的插件架构，包括CPU插件（MKL-DNN）、GPU插件（cl-DNN）、MYRIAD插件（myriad）、FPGA插件（DLIA），也可以使用MULTI插件，在运行推理时，推理引擎会查看每个设备的利用率，根据该指标，决定模型在哪个设备上运行

## 2 第3课：AI应用中的视频加速处理

- 异构计算：目标是发挥系统的最大性能，提供最高的FPS、最快的响应速度、压缩尽可能多的待处理视频。
  1. 了解不同设备的任务负载情况，根据需求设计更高效的异构系统
  2. 最大程度减少速度传输：在Intel集成显卡中压缩视频，并给CPU返回已压缩的视频数据，将数据交给VPU进行推理
  3. 所有设备保持同步

- 第6代CPU的布局架构：GT2包括24个EU，GT3包括48个EU，GT4包括72个EU
- 其他功能：
  1. VDBox：提供BitStreamer的加速视频编解码
  2. VEBox：提供视频增强和帧处理操作的硬件加速
- Intel Media-SDK：提供C++/Python API、Gstreamer和OpenCV，加速视频编解码，提供视频处理，比如重新调整大小、转换等
- oneVPL（视频处理库）：逐步替代Media-SDK，不仅支持Intel CPU和GPU，并支持独立GPU和其他平台